<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>rt</title>
    <link rel="stylesheet" href="style.css">   
    <link rel="stylesheet" href="./lib/vendors/simple-console.css">
<script src="./lib/vendors/simple-console.js"></script>

</head>
<!-- https://www.googleapis.com/customsearch/v1?q=music&key=AIzaSyBCXMcymaqef8RmYskmdVOJcQA5e06Zvyg -->
<body style='margin-left:20px'>

     <h3>Mix Sounds   <span id='rx1'></span></h3>
    <table>
        <tr>
            <td>
               <audio controls id='yt2' src="./samples/lana.mp3"></audio>
            </td>
            <td>
                  <div> pre-amp Volume:&nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="range" 
                        id="volume" 
                        class="control-volume" 
                        min="-1" max="4" value="1" 
                        list="gain-vals"
                        step="0.01" 
                        oninput="event.target.nextElementSibling.innerText=event.target.value"
                        data-action="volume" />
                    <label>1</label></div>

                   <div> second amp Volume:
                    <input type="range" 
                        id="volume2" 
                        class="control-volume" 
                        min="0" max="3" value="1" 
                        list="gain-vals"
                        step="0.01" 
                        oninput="event.target.nextElementSibling.innerText=event.target.value"
                        data-action="volume" />
                    <label>1</label>
                    <button id='select-mike'>use mic</button>
                    </div>
            </td>
   
        </tr>
        <tr>
            <td rowspan=2 colspan=2>
                <button id='start'>Click to initialize audio ctx</button>

                <form id='eq_update_form'> 
          
                    <table id='eq_ui_container'>
                        
                </table></form>
            </td>
            <td>
                <span class='canvas_wrapper'><canvas id='input_time'></canvas></span>
                <span class='canvas_wrapper'><canvas id='input_freq'></canvas></span>

            </td>

        </tr>
        <tr>
            <td>
                <div class='canvas_wrapper'><canvas id='output_time'></canvas></div>
                <div class='canvas_wrapper'><canvas id='output_freq'></canvas></div>
            </td>

        </tr>
    </table></div>

</body>

<template id='eq_ui_row_template'>
 <tr>
        <td><span class='hz_label'></span></td>
        <td><input name="gain"  value="0" data-index="0" type="range" min="-12" max="12" step="0.1"></td>
        <td><span class='gain_label' for='update_gain'></span></td>
        <td><input name="q" value="8" data-index="0" type="range" min="0" max="60" step="0.1"></td>
        <td><span  class="q_label"></span></td>
        <td><meter class="freq_resp_meter" type="range" min="0" max="60" step="0.1"></meter></td>


        <td><input name="threshold" step="0.1" tag="0" type="range" value="-24" placeholder="threshold" max="0" min="-100"> </td>
        <td><span  class="threshold_label"></span></td>

        <td><input size="3" name="knee" step="0.1" tag="0" type="numeric" value="30" placeholder="knee" max="40" min="0"> </td>
        <td><input size="3" name="ratio" step="0.1" tag="0" type="numeric" value="12" placeholder="ratio" max="20" min="1"> </td>
        <td><input size="3" name="attack" step="0.1" tag="0" type="numeric" value="0" placeholder="attack" max="1" min="0"> </td>
        <td><input size="3" name="release" step="0.1" tag="0" type="numeric" value="0.25" placeholder="release" max="20" min="1"> </td>
 </tr>
</template>

<script type='module' src='./equalizer.js'></script>
<script>

var con = new SimpleConsole({
	placeholder:"",
    id: "console",
	handleCommand: function(command){
		try {
		    con.log(window.eq_stdin(command));
		} catch(error) {
			con.log(error);
		}
	},
	autofocus: true, // if the console is to be the primary interface of the page
	storageID: "app-console", // or e.g. "simple-console-#1" or "workspace-1:javascript-console"
});

// add the console to the page
document.body.append(con.element);

window.log = con.log;;
window.logErr = con.logError;
// show any uncaught errors (errors may be unrelated to the console usage)
// con.handleUncaughtErrors();
</script>

</body>

</html>