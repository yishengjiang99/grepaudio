<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>rt</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="./simple-console.css">
    <script src="./simple-console.js"></script>
</head>

<body>

    <div>
        <h3>Mix Sounds </h3> <button style='display:inline' id='reset'>reset</button>
    </div>

    <div style='margin:20px;position:relative'>
        <div id="overlay" title="Click to turn off the overlay effect" style="display: block;">
            <div class="text">overlay blocker</div>
            <div class="text"><br>
                <br><span style="font-size:20px;" class="w3-black w3-padding w3-hide-medium w3-hide-small">
                    Click anywhere to turn off the overlay effect
                </span></div>
        </div>
        <table>
            <tr>
                <td>
                    <div> pre-amp Volume:&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="range" id="volume" class="control-volume" min="-1" max="4" value="1"
                            list="gain-vals" step="0.01"
                            oninput="event.target.nextElementSibling.innerText=event.target.value"
                            data-action="volume" /> <span></span>
                    </div>

                    <div> second amp Volume:
                        <input type="range" id="volume2" class="control-volume" min="0" max="3" value="1"
                            list="gain-vals" step="0.01"
                            oninput="event.target.nextElementSibling.innerText=event.target.value"
                            data-action="volume" /><span></span>
                    </div>
                </td>
                <td colspan=2 align=right>

                    <span id=ctrls>
                        <audio controls src='/samples/song.mp3'>
                        </audio>
                    </span>
                    <span> <button id=mic-check>Mic Check!</button>
                    </span>

                </td>

            </tr>
            <tr>
                <td rowspan=2 colspan=1>
                    <button id='reset'>reset</button>
                    <form id="eq_update_form">

                    </form>

                </td>
                <td>
                    <div class='canvas_wrapper'><canvas id='input_freq'></canvas></div>
                    <div id='rx2'></div>
                    <div id='rx2log'></div>
                </td>
                <td>
                    <div class='canvas_wrapper'><canvas id='output_freq'></canvas></div>
                </td>
            </tr>
            <tr>
                <td colspan=3>
                    <div id="rx1"></div>


                </td>
            </tr>
        </table>
    </div>


    <script src='polyfills.js'></script>


    <script type='module'>

        import equilizer from "./equalizer.js";
        import Recorder from './components/record.js';
        import AudioTag from './components/audiotag.js';
        
        let audioCtx, audioTag, eq;

        $("#overlay").onclick = function (e) {
          $("#overlay").style.display='none';
        
            this.style.display='none';
     
            audioCtx = new AudioContext();
            // audioCtx.start();
            audioTag = AudioTag("#ctrls");
            window.g_audioTag = audioTag;
            window.g_audioCtx = audioCtx;
            eq = equilizer.initializeContext(audioCtx);
          //  const recorder = new Recorder();

          }


    </script>



</body>

</html>