
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>rt</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="./simple-console.css">
    <script src="./simple-console.js"></script>
</head>

<body>
    <div id="overlay" title="Click to turn off the overlay effect" style="display: block;">
        <div class="text">overlay blocker</div>
        <div class="text"><br>
            <br><span style="font-size:20px;" class="w3-black w3-padding w3-hide-medium w3-hide-small">
                Click anywhere to turn off the overlay effect
            </span></div>
    </div>
    <div>
        <h3>Mix Sounds </h3>
    </div>

    <div class='container' style='margin:20px;position:relative'>


        <table>
            <tr>
                <td>
                    <div> pre-amp Volume:&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="range" id="volume" class="control-volume" min="-1" max="4" value="1"
                            list="gain-vals" step="0.01"
                            oninput="event.target.nextElementSibling.innerText=event.target.value"
                            data-action="volume" /> <span></span>
                    </div>

                    <div> second amp Volume:
                        <input type="range" id="volume2" class="control-volume" min="0" max="3" value="1"
                            list="gain-vals" step="0.01"
                            oninput="event.target.nextElementSibling.innerText=event.target.value"
                            data-action="volume" /><span></span>
                    </div>
                </td>
                <td colspan=2 style='text-align:right'>

                    <span id=ctrls>
                          <button id='miccheck'>use microphone</button>
                          <select id='selectsong'>
                            <option value='Ds4.mp3'>Ds4.mp3</option><option value='Ds5.mp3'>Ds5.mp3</option><option value='Ds6.mp3'>Ds6.mp3</option>

                            <option value='Ds7.mp3'>Ds7.mp3</option><option value='Fs1.mp3'>Fs1.mp3</option><option value='Fs2.mp3'>Fs2.mp3</option>
                            <option value='Fs3.mp3'>Fs3.mp3</option><option value='Fs4.mp3'>Fs4.mp3</option><option value='Fs5.mp3'>Fs5.mp3</option>
                            <option value='Fs6.mp3'>Fs6.mp3</option><option value='Fs7.mp3'>Fs7.mp3</option><option value='lana.mp3'>lana.mp3</option>
                            <option value='song.mp3'>song.mp3</option><option value='toxic.mp3'>toxic.mp3</option><option value=''></option>
                          </option>
                        </select>


                    </span>

                </td>
            </tr>
            <tr>
                <td rowspan=2 colspan=1>
                    <button id='reset'>reset</button>
                    <form id="eq_update_form">

                    </form>

                </td>
                <td>
                    <div class='canvas_wrapper'><canvas id='output_freq'></canvas></div>
                </td>
                <td>
                    <div class='canvas_wrapper'><canvas id='input_freq'></canvas></div>
                </td>
            </tr>
            <tr>
                <td colspan=1>
                    <audio id='audio' controls autoplay=true src='./samples/song.mp3'></audio>
                    <div id=console></div>
                </td>
            </tr>
        </table>
        <div id="rx1"></div>
        <div id='rx1'></div>
        <div id='rx2log'></div>

    </div>


    <script src='polyfills.js'></script>


    <script type='module'>

        import equilizer from "./equalizer.js";
        import Mixer from './Mixer.js';


        let audioCtx, audioTag, eq;

        $("#overlay").onclick = async function (e) {
          $("#overlay").style.zIndex=-99;

            this.style.display='none';

            audioCtx = new AudioContext();

            var audioTag =await Mixer(audioCtx, "ctrls");
  
//            audioTag.add_audio_tag("audio");
            window.g_audioTag = audioTag;
            window.g_audioCtx = audioCtx;

            eq = equilizer.initializeContext(audioCtx, audioTag.outputNode);
          //  const recorder = new Recorder();

          }


    </script>



</body>

</html>

