<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>React</title>
    <!-- Our helper library -->
    <script
      type="text/javascript"
      src="https://opentechschool-brussels.github.io/intro-to-webGL-and-shaders/src/lib.js"
    ></script>
    <script
      type="text/javascript"
      src="https://opentechschool-brussels.github.io/intro-to-webGL-and-shaders/src/J3DIMath.js"
    ></script>
    <script id="vshader" type="x-shader/x-vertex">

      attribute mediump vec3 position;

       void main(void) {
           // The definition of the translation
           mediump vec3 moveBy;
           moveBy.x = 0.3;
           moveBy.y = 0.2;
           moveBy.z = 0.0;

           gl_Position = vec4(position + moveBy, 1.0);
       }
    </script>
    <script id="fshader" type="x-shader/x-fragment">

       void main(void) {
              gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);

      }
    </script>
    <style>
      body {
        padding: 0;
        margin: 0;
      }
      canvas {
        width: 100vw;
        height: 100vh;
        background-color: "black";
      }
      #cp {
        color: white;
        position: absolute;
        z-index: 10;
      }
    </style>
  </head>
  <body onload="setup()">
    <canvas id="my_canvas"></canvas>
    <script type="text/javascript">
      var setup = function () {
        // You set up everything
        OTSHelper_initGL("my_canvas");
        OTSHelper_createShaders();
        OTSHelper_createTriangle();
        function compileShader(source, type, typeString) {
          //creates an empty shader object
          var shaderID = GL.createShader(type);

          // sets the source code in shader
          GL.shaderSource(shaderID, source);

          // compile the shader object
          GL.compileShader(shaderID);

          if (!GL.getShaderParameter(shaderID, GL.COMPILE_STATUS)) {
            console.log(
              "ERROR IN " +
                typeString +
                " SHADER : " +
                GL.getShaderInfoLog(shaderID)
            );
            return false;
          }
          return shaderID;
        }
        var vShaderString = document.getElementById("vshader").text;
        var vShaderID = compileShader(
          vShaderString,
          GL.VERTEX_SHADER,
          "VERTEX"
        );

        var fShaderString = document.getElementById("fshader").text;
        var fShaderID = compileShader(
          fShaderString,
          GL.FRAGMENT_SHADER,
          "FRAGMENT"
        );

        //creates an empty program object
        shaderProgramID = GL.createProgram();

        //attach shaders to the program
        GL.attachShader(shaderProgramID, vShaderID);
        GL.attachShader(shaderProgramID, fShaderID);

        //link the program
        GL.linkProgram(shaderProgramID);

        //get position attribute location in the shader
        var positionAttributeLocation = GL.getAttribLocation(
          shaderProgramID,
          "position"
        );

        // enable the attribute
        GL.enableVertexAttribArray(positionAttributeLocation);

        // Launching the first drawing
        draw();
      };
      var draw = function () {
        OTSHelper_draw();
        requestAnimationFrame(draw);
      };
    </script>
  </body>
</html>

