<html lang="en">

<head>


    <style>
        body {

            color: #C0C0C0;
            background-color: black;
            position: fixed;
            overflow-x: hidden;
            position: fixed;
            overflow-y: scroll;
            width: 100%;
        }
    </style>
</head>

<body>

</body>
<script>
    const b = document.body;
    fetch("/list").then(res => res.json()).then(json => b.append(JSON.stringify(json)));

    function connectToPeer() {
        fetch("/connect").then(res => res.json()).then(async offer => {
            var pc = new RTCPeerConnection({ sdpSemantics: 'unified-plan' });
            await pc.setRemoteDescription(new RTCSessionDescription(offer));
            const answer = await pc.createAnswer();
            await pc.setLocalDescription(answer);

            b.append(JSON.stringify(answer))
            fetch("/answer/" + offer.index, {
                method: 'POST',
                body: JSON.stringify(pc.localDescription),
                headers: {
                    'Content-Type': 'application/json'
                }
            }).then(resp => resp.text()).then(t => b.append(t));
            return pc;

        });
    }

</script>

</html>