  <!DOCTYPE html>
  <html>
  <head>
  </head>


  <body>
  <div id=console>

  </div>
  <canvas id="myCanvas" width="320" height="200" style="border:1px solid #d3d3d3;">
  Your browser does not support the HTML5 canvas tag.</canvas>

  <script type='module'>
  import AnalyzerView from './AnalyzerView.js'

  function log(txt){
    document.getElementById("console").innerHTML += "<br>"+ txt;
  }

  window.addEventListener('click',function(){
    window.removeEventListener('click',this);
    var ctx = new AudioContext();
    var o =ctx.createOscillator();

    o.frequency.setValueAtTime(20, ctx.currentTime);
    var oscillator = o;
    oscillator.type = 'square';
    oscillator.frequency.setValueAtTime(314, ctx.currentTime); // value in hertz
    oscillator.connect(ctx.destination);
    oscillator.start();



    var v = new AnalyzerView(o);

    v.histogram("myCanvas");

    console.log("rms "+ v.rms().toString());
  });



  </script>

  </body>
  </html>
